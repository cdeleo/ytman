<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="ytman-images-cropper.html">

<dom-module id="ytman-images-add">
  <template>
    <input type="file" accept="image/*" on-change="_onImageChanged" />
    <ytman-images-cropper id="cropper"></ytman-images-cropper>
  </template>

  <script>
    class YtmanImagesAdd extends Polymer.Element {
      static get is() { return 'ytman-images-add'; }
      static get properties() {
        return {};
      }

      _onImageChanged(e) {
        if (e.target.files.length == 0) {
          return;
        }
        const reader = new FileReader();
        reader.onload = e => {
          const image = new Image();
          image.addEventListener('load', () => {
            this.$.cropper.image = image;
          });
          image.src = e.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);
      }
    }

    window.customElements.define(YtmanImagesAdd.is, YtmanImagesAdd);
  </script>
</dom-module>
