<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="ytman-images-list-loader.html">

<dom-module id="ytman-images-picker">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>
    <style>
      .layout {
        max-width: 1100px;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 30px;
      }

      paper-card {
        width: 250px;
        margin: 10px;
      }
    </style>

    <!-- <google-signin-aware
        scopes="https://www.googleapis.com/auth/userinfo.email"
        is-authorized="{{isAuthorized}}"></google-signin-aware>

    <google-client-loader
        app-id="datastore-dot-youtube-manager-196811"
        name="images"
        version="v1"></google-client-loader> -->

    <ytman-images-list-loader
        id="imagesList"
        page-size=12
        images={{images}}
        has-previous={{hasPrevious}}
        has-next={{hasNext}}></ytman-images-list-loader>

    <div class="layout horizontal wrap center-justified">
      <template is="dom-repeat" items="[[images]]">
        <paper-card image="{{item.url}}">
          <div class="card-content">{{item.name}}</div>
        </paper-card>
      </template>
    </div>

    <div class="layout horizontal center-justified">
      <paper-button
          disabled=[[!hasPrevious]]
          on-click="_goPrevious">Previous</paper-button>
      <paper-button disabled=[[!hasNext]] on-click="_goNext">Next</paper-button>
    </div>
  </template>

  <script>
    class YtmanImagesPicker extends Polymer.Element {
      static get is() { return 'ytman-images-picker'; }
      static get properties() {
        return {};
      }

      reload() {
        this.$.imagesList.reload();
      }

      _goPrevious() {
        this.$.imagesList.previousPage();
      }

      _goNext() {
        this.$.imagesList.nextPage();
      }
    }

    window.customElements.define(YtmanImagesPicker.is, YtmanImagesPicker);
  </script>
</dom-module>
