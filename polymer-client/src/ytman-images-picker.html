<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="ytman-images-card.html">
<link rel="import" href="ytman-images-list-loader.html">

<dom-module id="ytman-images-picker">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>
    <style>
      .main {
        max-width: 1100px;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 30px;
      }

      paper-card {
        width: 250px;
        margin: 10px;
      }

      .card-content {
        padding-top: 2px;
        padding-bottom: 2px;
        padding-right: 2px;
      }

      .delete {
        color: lightgray;
      }

      .delete:hover {
        color: black;
      }
    </style>

    <google-signin-aware
        scopes="https://www.googleapis.com/auth/userinfo.email"
        is-authorized="{{isAuthorized}}"></google-signin-aware>

    <google-client-loader
        app-id="datastore-dot-youtube-manager-196811"
        name="images"
        version="v1"></google-client-loader>

    <ytman-images-list-loader
        id="imagesList"
        page-size=12
        images={{images}}
        has-previous={{hasPrevious}}
        has-next={{hasNext}}></ytman-images-list-loader>

    <div class="main layout horizontal wrap center-justified">
      <template is="dom-repeat" items="[[images]]">
        <ytman-images-card
            item=[[item]] on-deleted="reload"></ytman-images-card>
      </template>
    </div>

    <div class="main layout horizontal center-justified">
      <paper-button
          disabled=[[!hasPrevious]]
          on-click="_goPrevious">Previous</paper-button>
      <paper-button disabled=[[!hasNext]] on-click="_goNext">Next</paper-button>
    </div>
  </template>

  <script>
    class YtmanImagesPicker extends Polymer.Element {
      static get is() { return 'ytman-images-picker'; }
      static get properties() {
        return {};
      }

      reload() {
        this.$.imagesList.reload();
      }

      _goPrevious() {
        this.$.imagesList.previousPage();
      }

      _goNext() {
        this.$.imagesList.nextPage();
      }
    }

    window.customElements.define(YtmanImagesPicker.is, YtmanImagesPicker);
  </script>
</dom-module>
